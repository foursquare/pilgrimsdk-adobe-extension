<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Pilgrim SDK Configuration</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
    crossorigin="anonymous">
  <link rel="stylesheet" href="../resources/pilgrim.css">
</head>

<body class="page-bg">
  <div class="pop-container">
    <div class="text-container">
      <h3>Pilgrim SDK</h3>
      <p>
        Use the Pilgrim SDK to get contextually relevant location events when your users move about in the real world.
        Trigger push notifcations off of events or use the event behavior to segment users.
      </p>
      <p>Learn more about
        <a href="https://developer.foursquare.com/docs" target="_blank">the Pilgrim SDK</a>.
      </p>      
      <div class="title-text">Setup your application keys</div>
        <form>
          <section>
            <span class="pilgrim-id-key">
              Consumer Key
            </span>
            <span>
              <input id="consumerKey" class="text-boxes placeholders" placeholder="Enter consumer key">
            </span>
            <span class="pilgrim-id-key">
                Consumer Secret
            </span>
            <span>
              <input id="consumerSecret" class="text-boxes placeholders" placeholder="Enter consumer secret">
            </span>
          </section>
        </form>
    </div>
    <script src="https://assets.adobedtm.com/activation/reactor/extensionbridge/extensionbridge.min.js"></script>
    <script>
      window.extensionBridge.register({
        init: function (info) {
          if (info.settings) {
            // Populate form values from persisted settings.
            document.getElementById('consumerKey').value = (info.settings.pilgrimConsumerKey) || '';
            document.getElementById('consumerSecret').value = (info.settings.pilgrimConsumerSecret) || '';
          }
        },
        getSettings: function () {
          // Return settings object from form values.
          return {
            pilgrimConsumerKey: document.getElementById('consumerKey').value || '',
            pilgrimConsumerSecret: document.getElementById('consumerSecret').value || ''
          }
        },
        validate: function () {
          // Return whether settings are valid.
          var consumerKeyField = document.getElementById('consumerKey');
          var consumerSecretField = document.getElementById('consumerSecret');
          consumerKeyField.invalid = !consumerKeyField.value;
          consumerSecretField.invalid = !consumerSecretField.value;
          
          return !consumerKeyField.invalid && !consumerSecretField.invalid;
        }
      });
    </script>
  </div>
</body>

</html>
